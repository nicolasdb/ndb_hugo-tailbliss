/*──────────────────────────────────────────────────────────────
  ndb design tokens — single source of truth

  Phase 0 location: defined in Hugo repo (assets/css/main.css)
  Future: extracted to ndb_design-tokens/ when backoffice starts

  Consumed by:
    - portfolio: assets/css/main.css  (direct, Phase 0)
    - backoffice: src/app.css         (via shared package, later)

  Color space: OKLCH (perceptually uniform)
  Theme: .light (portfolio) / .dark (backoffice)
  Architecture: linked repos, not monorepo

  Last updated: 2026-02-11
  Locked decisions: typography (The Archivist), color semantics,
                    linked repos, Netlify deployment
──────────────────────────────────────────────────────────────*/


/* ══════════════════════════════════════════════════════════
   1. TYPOGRAPHY
   ══════════════════════════════════════════════════════════ */

/*
  Pairing: "The Archivist"
  - Heading:  Literata (optical sizing, warm serif, reading-optimized)
  - Body:     Hanken Grotesk (geometric, friendly, good density)
  - Mono:     Commit Mono (terminal feel, even character width)

  Rationale: Library warmth + quiet authority. Literata was designed
  for Google Books (long reading). Hanken Grotesk holds up at small
  sizes in dense dark UI. Commit Mono for all metadata, code, and
  system-level text.

  Google Fonts imports (add to HTML <head> or @import):
  - https://fonts.googleapis.com/css2?family=Literata:opsz,wght@7..72,400;7..72,500;7..72,700&display=swap
  - https://fonts.googleapis.com/css2?family=Hanken+Grotesk:wght@400;500;600;700&display=swap
  - https://fonts.googleapis.com/css2?family=Commit+Mono:wght@400;700&display=swap
*/

:root {
  /* Font families */
  --font-heading: 'Literata', Georgia, 'Times New Roman', serif;
  --font-body: 'Hanken Grotesk', system-ui, -apple-system, sans-serif;
  --font-mono: 'Commit Mono', 'JetBrains Mono', 'Fira Code', monospace;

  /* Font weights */
  --weight-normal: 400;
  --weight-medium: 500;
  --weight-semibold: 600;
  --weight-bold: 700;
}


/* ── Type Scale: Portfolio (light gallery) ────────────── */
/* Generous sizes, wide line-height, reading-optimized     */

.light {
  --text-display:       2.5rem;    /* 40px — hero name */
  --text-h1:            1.75rem;   /* 28px — page titles */
  --text-h2:            1.375rem;  /* 22px — section titles */
  --text-h3:            1.25rem;   /* 20px — article titles */
  --text-h4:            1.0625rem; /* 17px — pattern card titles */
  --text-body:          0.9375rem; /* 15px — article text */
  --text-small:         0.8125rem; /* 13px — secondary body */
  --text-meta:          0.75rem;   /* 12px — mono metadata */
  --text-micro:         0.6875rem; /* 11px — timestamps, labels */
  --text-nano:          0.625rem;  /* 10px — uppercase section labels */

  --leading-display:    1.15;
  --leading-heading:    1.3;
  --leading-body:       1.7;
  --leading-small:      1.6;
  --leading-mono:       1.5;

  --tracking-display:  -0.02em;
  --tracking-heading:  -0.01em;
  --tracking-body:      0;
  --tracking-label:     0.08em;
  --tracking-mono:      0.01em;

  --measure-body:       65ch;      /* max line width for body text */
  --measure-narrow:     54ch;      /* hero description */
  --measure-wide:       80ch;      /* full content width */
}


/* ── Type Scale: BackOffice (dark workshop) ───────────── */
/* Compact sizes, tight line-height, density-optimized     */

.dark {
  --text-display:       1.75rem;   /* 28px — mode headers */
  --text-h1:            1.375rem;  /* 22px — section titles */
  --text-h2:            1.125rem;  /* 18px — panel titles */
  --text-h3:            1rem;      /* 16px — card titles */
  --text-h4:            0.875rem;  /* 14px — sub-headers */
  --text-body:          0.875rem;  /* 14px — primary UI text */
  --text-small:         0.8125rem; /* 13px — pearl titles, list items */
  --text-meta:          0.75rem;   /* 12px — mono metadata */
  --text-micro:         0.6875rem; /* 11px — labels, timestamps */
  --text-nano:          0.625rem;  /* 10px — uppercase micro-labels */

  --leading-display:    1.2;
  --leading-heading:    1.25;
  --leading-body:       1.5;
  --leading-small:      1.4;
  --leading-mono:       1.5;

  --tracking-display:  -0.01em;
  --tracking-heading:  -0.005em;
  --tracking-body:      0;
  --tracking-label:     0.06em;
  --tracking-mono:      0.02em;

  --measure-body:       80ch;      /* wider for dense UI */
  --measure-narrow:     60ch;
  --measure-wide:       100%;      /* full-width panels */
}


/* ══════════════════════════════════════════════════════════
   2. COLOR SYSTEM
   ══════════════════════════════════════════════════════════ */

/*
  Semantic colors — universal meaning across both themes.
  These represent the pearl/knowledge system, not generic UI.

  | Token         | Meaning                                      |
  |---------------|----------------------------------------------|
  | --pearl       | Knowledge pearl (neutral, raw data)           |
  | --convergence | Convergence moment (old idea meets new work)  |
  | --pattern     | Extracted skill pattern (highlighted subgraph)|
  | --temporal    | Time markers (timeline, dates)                |
  | --frontier    | Fog of war / unexplored / quiet tertiary      |
  | --fresh       | New capture / fresh ingestion / strong signal  |
*/

:root {
  /* Pearl system — semantic, cross-theme */
  --pearl:        oklch(0.95 0.02 90);
  --convergence:  oklch(0.75 0.15 75);
  --pattern:      oklch(0.65 0.25 25);
  --temporal:     oklch(0.70 0.12 240);
  --frontier:     oklch(0.40 0.01 260);
  --fresh:        oklch(0.75 0.18 145);
}


/* ── Light theme (Portfolio) ──────────────────────────── */

.light {
  --surface:          oklch(0.97 0.005 260);
  --surface-elevated: oklch(1.0 0 0);
  --text-primary:     oklch(0.15 0.02 260);
  --text-secondary:   oklch(0.45 0.02 260);
  --text-tertiary:    oklch(0.60 0.015 260);
  --border:           oklch(0.90 0.005 260);
  --border-subtle:    oklch(0.93 0.005 260);
  --selection:        oklch(0.85 0.08 75);

  /* Semantic colors adjusted for light background legibility */
  --pearl:        oklch(0.35 0.04 90);
  --convergence:  oklch(0.52 0.14 75);
  --pattern:      oklch(0.48 0.18 25);
  --temporal:     oklch(0.48 0.10 240);
  --frontier:     oklch(0.75 0.01 260);
  --fresh:        oklch(0.42 0.14 145);

  /* Confidence bar thresholds */
  --confidence-strong: var(--fresh);       /* 85%+ */
  --confidence-solid:  var(--convergence); /* 70-84% */
  --confidence-emerging: var(--temporal);  /* <70% */

  /* Timeline */
  --timeline-line: oklch(0.82 0.01 260);
}


/* ── Dark theme (BackOffice) ──────────────────────────── */

.dark {
  --surface:          oklch(0.15 0.02 260);
  --surface-elevated: oklch(0.20 0.02 260);
  --text-primary:     oklch(0.93 0.01 260);
  --text-secondary:   oklch(0.65 0.02 260);
  --text-tertiary:    oklch(0.40 0.01 260);
  --border:           oklch(0.25 0.02 260);
  --border-subtle:    oklch(0.22 0.02 260);
  --selection:        oklch(0.35 0.10 75);

  /* Semantic colors: :root values work on dark backgrounds */
  /* (no override needed — the :root pearl system is designed for dark) */

  /* Confidence bar thresholds */
  --confidence-strong: var(--fresh);
  --confidence-solid:  var(--convergence);
  --confidence-emerging: var(--temporal);

  /* Timeline */
  --timeline-line: oklch(0.30 0.01 260);
}


/* ══════════════════════════════════════════════════════════
   3. SPACING
   ══════════════════════════════════════════════════════════ */

/*
  4px base unit. Named for intent, not size.
  Portfolio uses generous spacing. BackOffice uses compact.
*/

:root {
  --space-unit: 4px;

  --space-1:  4px;    /* micro gap */
  --space-2:  8px;    /* inline spacing */
  --space-3:  12px;   /* tight component padding */
  --space-4:  16px;   /* standard component padding */
  --space-5:  20px;   /* card padding (backoffice) */
  --space-6:  24px;   /* card padding (portfolio), section gaps */
  --space-8:  32px;   /* page horizontal padding, section breaks */
  --space-10: 40px;   /* section vertical padding */
  --space-12: 48px;   /* major section spacing */
  --space-16: 64px;   /* hero top padding */
  --space-20: 80px;   /* page-level breathing room */
}

.light {
  --page-padding-x:   var(--space-8);   /* 32px */
  --page-max-width:   920px;
  --section-padding-y: var(--space-12);  /* 48px → 44px used in prototype */
  --card-padding:     var(--space-6);    /* 24px */
  --card-gap:         var(--space-4);    /* 16px */
  --item-gap:         var(--space-6);    /* 24px between list items */
  --hero-padding-top: var(--space-16);   /* 68px used in prototype */
}

.dark {
  --page-padding-x:   var(--space-4);   /* 16px — tighter for full-width */
  --page-max-width:   100%;             /* full screen */
  --section-padding-y: var(--space-5);   /* 20px */
  --card-padding:     var(--space-5);    /* 20px */
  --card-gap:         var(--space-3);    /* 12px */
  --item-gap:         var(--space-2);    /* 8px */
  --nav-width:        48px;             /* slim icon nav */
  --nav-width-expanded: 200px;          /* expanded on hover */
  --context-bar-height: 40px;
  --capture-bar-height: 56px;
}


/* ══════════════════════════════════════════════════════════
   4. BORDERS & RADII
   ══════════════════════════════════════════════════════════ */

:root {
  --radius-none: 0;
  --radius-sm:   2px;   /* subtle, e.g. code blocks */
  --radius-md:   3px;   /* cards, inputs */
  --radius-lg:   4px;   /* elevated panels */
  --radius-full: 9999px; /* dots, pills */

  --border-width: 1px;
}

/*
  DESIGN RULE: No rounded corners on large containers.
  radius-md (3px) is the maximum for cards and panels.
  This avoids the "AI slop" bubbly aesthetic.

  radius-full only for:
  - Pearl dots (6px circles)
  - Timeline nodes (11px circles)
  - Status indicators
*/


/* ══════════════════════════════════════════════════════════
   5. COMPONENT TOKENS
   ══════════════════════════════════════════════════════════ */

/* ── Navigation ───────────────────────────────────────── */

:root {
  --nav-height: 54px;
  --nav-logo-size: var(--text-h2);      /* "ndb" */
  --nav-link-size: var(--text-body);
  --nav-blur: 10px;                     /* backdrop-filter on scroll */
  --nav-bg-scrolled: oklch(0.97 0.005 260 / 0.92);
}

/* ── Confidence bars ──────────────────────────────────── */

:root {
  --confidence-height: 3px;
  --confidence-height-full: 4px;
  --confidence-radius: 1px;
  --confidence-bg: var(--border-subtle);
}

/* ── Timeline ─────────────────────────────────────────── */

:root {
  --timeline-spine-width: 1px;
  --timeline-node-size: 11px;       /* year marker ring */
  --timeline-node-border: 2px;
  --timeline-dot-size: 5px;         /* moment dot */
  --timeline-indent: 28px;          /* left padding from spine to content */
  --timeline-year-gap: 24px;        /* between year groups */
  --timeline-moment-gap: 10px;      /* between moments in same year */
}

/* ── Pattern cards ────────────────────────────────────── */

:root {
  --pattern-graph-width: 72px;
  --pattern-graph-height: 44px;
}

/* ── Pearl dots ───────────────────────────────────────── */

:root {
  --pearl-dot-size: 6px;
  --pearl-dot-fresh: var(--fresh);
  --pearl-dot-default: var(--pearl);
}


/* ══════════════════════════════════════════════════════════
   6. BASE RESET & GLOBALS
   ══════════════════════════════════════════════════════════ */

/*
  Minimal reset. Include in both apps.
  Each app adds its own theme class to <html>.
*/

*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  background: var(--surface);
  color: var(--text-primary);
  font-family: var(--font-body);
  line-height: var(--leading-body);
}

::selection {
  background: var(--selection);
}


/* ══════════════════════════════════════════════════════════
   7. UTILITY CLASSES
   ══════════════════════════════════════════════════════════ */

/*
  Minimal set. NOT a component library.
  Build components as needed. Three similar implementations
  before abstracting. (Anti-over-engineering rule.)
*/

/* Typography roles */
.font-heading { font-family: var(--font-heading); }
.font-body    { font-family: var(--font-body); }
.font-mono    { font-family: var(--font-mono); }

/* Section labels (mono, uppercase, small) */
.section-label {
  font-family: var(--font-mono);
  font-size: var(--text-nano);
  font-weight: var(--weight-normal);
  text-transform: uppercase;
  letter-spacing: var(--tracking-label);
  color: var(--text-tertiary);
}

/* Mono metadata (timestamps, counts, tags) */
.meta {
  font-family: var(--font-mono);
  font-size: var(--text-meta);
  color: var(--text-tertiary);
  letter-spacing: var(--tracking-mono);
}

/* Separator dot for inline meta lists */
.meta-sep {
  color: var(--border);
  margin: 0 var(--space-2);
}
