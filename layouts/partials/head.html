<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/site.webmanifest">
<link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
{{ partial "meta" . }}

{{/* Google Fonts preconnect for performance (Story 2.1) */}}
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
{{/* Google Fonts: Literata (heading), Hanken Grotesk (body), Commit Mono (mono) — DESIGN-SPEC §2 */}}
<link href="https://fonts.googleapis.com/css2?family=Commit+Mono:wght@400;700&family=Hanken+Grotesk:wght@400;500;600;700&family=Literata:opsz,wght@7..72,400;7..72,500;7..72,700&display=swap" rel="stylesheet">

{{/* DNS prefetch and preconnect for external resources */}}
<link href="//cdn.jsdelivr.net" rel="dns-prefetch">
<link href="https://cdn.jsdelivr.net" rel="preconnect" crossorigin="anonymous">
{{/* Cloudflare Insights prefetch - Note: StorageType.persistent warnings in console 
     are from Cloudflare's automatic injection and cannot be controlled by theme */}}
<link href="https://static.cloudflareinsights.com" rel="preconnect" rel="dns-prefetch">
<link href="https://static.cloudflareinsights.com" crossorigin="anonymous" rel="preconnect">

{{/* Hero image preload — added in Story 2.3 when hero is redesigned */}}

{{/* Preload critical navigation logo to prevent CLS */}}
<link href="/images/site-logo.svg" rel="preload" as="image" fetchpriority="high" loading="eager">

{{/* Preload Alpine.js script for better performance */}}
<link href="https://cdn.jsdelivr.net/npm/alpinejs@3.14.9/dist/cdn.min.js" as="script" rel="preconnect" rel="dns-prefetch">

{{/* Hide Alpine.js [x-cloak] elements until Alpine initializes to prevent nav menu flicker.
The x-cloak directive is located in the head partial to prevent rollup from Vite. */}}
<style>
  [x-cloak] {
    display: none !important;
  }
</style>

<script>
  // Light theme only: Portfolio always uses .light class (no dark mode, no OS detection)
  document.documentElement.classList.add('light');
</script>
{{/* CSS: use Vite-built file from project static/css when present (e.g. after build + copy); else PostCSS from theme assets. readDir only checks project root. */}}
{{ $mainCSS := "" }}
{{ if fileExists "static/css" }}
  {{ range readDir "static/css" }}
    {{ if and (strings.Contains .Name "main.") (strings.HasSuffix .Name ".css") }}{{ $mainCSS = .Name }}{{ end }}
  {{ end }}
{{ end }}

{{ if $mainCSS }}
<link rel="stylesheet" href="/css/{{ $mainCSS }}">
{{ else }}
{{ $styles := resources.Get "css/main.css" }}
{{ if $styles }}
  {{ $styles = $styles | postCSS }}
  {{ if hugo.IsProduction }}{{ $styles = $styles | minify | fingerprint | resources.PostProcess }}{{ end }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" />
{{ else }}
  {{ $styles := resources.Get "css/main.css" }}{{ if $styles }}<link rel="stylesheet" href="{{ $styles.RelPermalink }}" />{{ end }}
{{ end }}
{{ end }}